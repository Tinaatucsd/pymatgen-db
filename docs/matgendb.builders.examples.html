
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>matgendb.builders.examples package &#8212; pymatgen-db 2018.2.21 documentation</title>
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />

   
  
  <link media="only screen and (max-device-width: 480px)" href="_static/small_flask.css" type= "text/css" rel="stylesheet" />
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38991557-1']);
  _gaq.push(['_trackPageview']);
</script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pymatgen-db 2018.2.21 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="matgendb-builders-examples-package">
<h1>matgendb.builders.examples package<a class="headerlink" href="#matgendb-builders-examples-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-matgendb.builders.examples.copy_builder">
<span id="matgendb-builders-examples-copy-builder-module"></span><h2>matgendb.builders.examples.copy_builder module<a class="headerlink" href="#module-matgendb.builders.examples.copy_builder" title="Permalink to this headline">¶</a></h2>
<p>Simple “copy” builder.</p>
<p>Copies from one collection to another.
With the optional incremental feature, running twice will only copy the new records, i.e.
running twice in succession will cause the second run to do nothing.</p>
<p>To run:</p>
<p>mgbuild</p>
<dl class="class">
<dt id="matgendb.builders.examples.copy_builder.CopyBuilder">
<em class="property">class </em><code class="descname">CopyBuilder</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matgendb/builders/examples/copy_builder.html#CopyBuilder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matgendb.builders.examples.copy_builder.CopyBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">matgendb.builders.core.Builder</span></code></p>
<p>Copy from one MongoDB collection to another.</p>
<dl class="method">
<dt id="matgendb.builders.examples.copy_builder.CopyBuilder.get_items">
<code class="descname">get_items</code><span class="sig-paren">(</span><em>source=None</em>, <em>target=None</em>, <em>crit=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matgendb/builders/examples/copy_builder.html#CopyBuilder.get_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matgendb.builders.examples.copy_builder.CopyBuilder.get_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy records from source to target collection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>source</strong> (<em>QueryEngine</em>) – Input collection</li>
<li><strong>target</strong> (<em>QueryEngine</em>) – Output collection</li>
<li><strong>crit</strong> (<em>dict</em>) – Filter criteria, e.g. “{ ‘flag’: True }”.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matgendb.builders.examples.copy_builder.CopyBuilder.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matgendb/builders/examples/copy_builder.html#CopyBuilder.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matgendb.builders.examples.copy_builder.CopyBuilder.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement the analysis for each item of work here.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>item</strong> (<em>object</em>) – One item of work from the queue (i.e., one item from the iterator that
was returned by the <cite>setup</cite> method).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Status code, 0 for OK</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-matgendb.builders.examples.file_builders">
<span id="matgendb-builders-examples-file-builders-module"></span><h2>matgendb.builders.examples.file_builders module<a class="headerlink" href="#module-matgendb.builders.examples.file_builders" title="Permalink to this headline">¶</a></h2>
<p>Example builders that read or write files.</p>
<dl class="class">
<dt id="matgendb.builders.examples.file_builders.FileCounter">
<em class="property">class </em><code class="descname">FileCounter</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matgendb/builders/examples/file_builders.html#FileCounter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matgendb.builders.examples.file_builders.FileCounter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">matgendb.builders.core.Builder</span></code></p>
<p>Count lines and characters in a file.</p>
<dl class="method">
<dt id="matgendb.builders.examples.file_builders.FileCounter.finalize">
<code class="descname">finalize</code><span class="sig-paren">(</span><em>errors</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matgendb/builders/examples/file_builders.html#FileCounter.finalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matgendb.builders.examples.file_builders.FileCounter.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform any cleanup actions after all items have been processed.
Subclasses may choose not to implement this, in which case it is a no-op.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>had_errors</strong> (<em>bool</em>) – True if the run itself had errors.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True if nothing went wrong, else False</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matgendb.builders.examples.file_builders.FileCounter.get_items">
<code class="descname">get_items</code><span class="sig-paren">(</span><em>input_file=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matgendb/builders/examples/file_builders.html#FileCounter.get_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matgendb.builders.examples.file_builders.FileCounter.get_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform one-time setup at the top of a run, returning
an iterator on items to use as input.</p>
<p>If get_parameters() doesn’t return None, this method is used to
discover the names and types of this function’s parameters.
Otherwise, the docstring of this function is used.
This docstring must use the ‘:’ version of the restructured
text style. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyBuilder</span><span class="p">(</span><span class="n">Builder</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    :param source: The input porous materials collection</span>
<span class="sd">    :type source: QueryEngine</span>
<span class="sd">    :param target: The output materials collection</span>
<span class="sd">    :type target: QueryEngine</span>
<span class="sd">    &#39;&#39;&#39;</span>
</pre></div>
</div>
<p>More details on the parameters is in <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_items_parameters()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">iterator</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matgendb.builders.examples.file_builders.FileCounter.get_parameters">
<code class="descname">get_parameters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/matgendb/builders/examples/file_builders.html#FileCounter.get_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matgendb.builders.examples.file_builders.FileCounter.get_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Return key/value pairs that will be passed to get_items().</p>
<p>This is an alternative to the use of special docstrings as described
in <a class="reference internal" href="#matgendb.builders.examples.file_builders.FileCounter.get_items" title="matgendb.builders.examples.file_builders.FileCounter.get_items"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_items()</span></code></a>.</p>
<p>If the type of the argument is ‘QueryEngine’, then the driver program
will add options for, and create, a matgendb.query_engine.QueryEngine
instance. The value given for this argument will be interpreted as
the MongoDB collection name.</p>
<p>Some other basic Python types – list, dict, int, float – are
automatically parsed. If an empty value is supplied for these, then
None will be passed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">{‘param_name’: {‘type’: ‘param_type’, ‘desc’:’description’},
‘param2_name’: {‘type’: ‘param2_type’, ‘desc’:’descr2’}, ..}</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matgendb.builders.examples.file_builders.FileCounter.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matgendb/builders/examples/file_builders.html#FileCounter.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matgendb.builders.examples.file_builders.FileCounter.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement the analysis for each item of work here.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>item</strong> (<em>object</em>) – One item of work from the queue (i.e., one item from the iterator that
was returned by the <cite>setup</cite> method).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Status code, 0 for OK</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-matgendb.builders.examples.maxvalue_builder">
<span id="matgendb-builders-examples-maxvalue-builder-module"></span><h2>matgendb.builders.examples.maxvalue_builder module<a class="headerlink" href="#module-matgendb.builders.examples.maxvalue_builder" title="Permalink to this headline">¶</a></h2>
<p>Build a derived collection with the maximum
value from each ‘group’ defined in the source
collection.</p>
<dl class="class">
<dt id="matgendb.builders.examples.maxvalue_builder.MaxValueBuilder">
<em class="property">class </em><code class="descname">MaxValueBuilder</code><span class="sig-paren">(</span><em>ncores=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matgendb/builders/examples/maxvalue_builder.html#MaxValueBuilder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matgendb.builders.examples.maxvalue_builder.MaxValueBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">matgendb.builders.core.Builder</span></code></p>
<p>Example of incremental builder that requires
some custom logic for incremental case.</p>
<p>Create new builder for threaded or multiprocess execution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ncores</strong> (<em>int</em>) – Desired number of threads or processes to run</td>
</tr>
<tr class="field-even field"><th class="field-name">Raise:</th><td class="field-body">ValueError for bad ‘config’ arg</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="matgendb.builders.examples.maxvalue_builder.MaxValueBuilder.finalize">
<code class="descname">finalize</code><span class="sig-paren">(</span><em>errs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matgendb/builders/examples/maxvalue_builder.html#MaxValueBuilder.finalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matgendb.builders.examples.maxvalue_builder.MaxValueBuilder.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Update target collection with calculated maximum values.</p>
</dd></dl>

<dl class="method">
<dt id="matgendb.builders.examples.maxvalue_builder.MaxValueBuilder.get_items">
<code class="descname">get_items</code><span class="sig-paren">(</span><em>source=None</em>, <em>target=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matgendb/builders/examples/maxvalue_builder.html#MaxValueBuilder.get_items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matgendb.builders.examples.maxvalue_builder.MaxValueBuilder.get_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all records from source collection to add to target.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>source</strong> (<em>QueryEngine</em>) – Input collection</li>
<li><strong>target</strong> (<em>QueryEngine</em>) – Output collection</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matgendb.builders.examples.maxvalue_builder.MaxValueBuilder.process_item">
<code class="descname">process_item</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/matgendb/builders/examples/maxvalue_builder.html#MaxValueBuilder.process_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matgendb.builders.examples.maxvalue_builder.MaxValueBuilder.process_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate new maximum value for each group,
for “new” items only.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-matgendb.builders.examples">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-matgendb.builders.examples" title="Permalink to this headline">¶</a></h2>
<p>Description.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">matgendb.builders.examples package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-matgendb.builders.examples.copy_builder">matgendb.builders.examples.copy_builder module</a></li>
<li><a class="reference internal" href="#module-matgendb.builders.examples.file_builders">matgendb.builders.examples.file_builders module</a></li>
<li><a class="reference internal" href="#module-matgendb.builders.examples.maxvalue_builder">matgendb.builders.examples.maxvalue_builder module</a></li>
<li><a class="reference internal" href="#module-matgendb.builders.examples">Module contents</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/matgendb.builders.examples.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
      &copy; Copyright 2011, Shyue Ping Ong, Dan Gunter.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

  </body>
</html>